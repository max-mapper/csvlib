<html>
<head>
	<title>csvlib test</title>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js" type="text/javascript"></script> 
  <script src="https://github.com/janl/mustache.js/raw/master/mustache.js" type="text/javascript"></script> 
  <script src="csv.js" type="text/javascript"></script> 
  <script type="text/javascript">
    $(function() {
      var csvData = $('#csv').text(),
      rows = csv.rows(csvData),
      header = csv.header(rows),
      data = csv.data(rows),
      properties = csv.properties(header);

      var d = {
        csvData: csvData,
        rows: JSON.stringify(rows),
        header: JSON.stringify(header),
        data: JSON.stringify(data),
        properties: JSON.stringify(properties)
      }
      
      $('#testOutput').html(Mustache.to_html($('#testTemplate').text(), d))
      
    })
  </script>
</head>
<body>
<script id="csv" type="text/x-csv">name,startTime,endTime,latitude,longitude
hill house,,,42,-72
old church,,,42,-72.72
jon hill,,,43,-72
blue hill,,,42.542,-73</script>
<script id="testTemplate" type="text/mustache">
  <p>Original data:</p>
  <pre>{{csvData}}</pre>
  <p>All rows:</p>
  <pre>
    {{rows}}
  </pre>
  <p>Header row:</p>
  <pre>
    {{header}}
  </pre>
  <p>Data rows (minus header):</p>
  <pre>
    {{data}}
  </pre>
  <p>Row properties:</p>
  <pre>
    {{properties}}
  </pre>
</script>
<div id="testOutput"></div>
</body>
</html>
